# VPC

### VPC (Virtual Private Cloud) <a href="#vpc-virtual-private-cloud" id="vpc-virtual-private-cloud"></a>

아마존 공식 설명

> Amazon Virtual Private Cloud(VPC)를 사용하면 AWS 클라우드에서 논리적으로 격리된 공간을 프로비저닝하여 고객이 정의하는 가상 네트워크에서 AWS 리소스를 시작할 수 있습니다. IP 주소 범위 선택, 서브넷 생성, 라우팅 테이블 및 네트워크 게이트웨이 구성 등 가상 네트워킹 환경을 완벽하게 제어할 수 있습니다. VPC에서 IPv4와 IPv6를 모두 사용하여 리소스와 애플리케이션에 안전하고 쉽게 액세스할 수 있습니다

즉, `논리적으로 공간을 격리`하는데, 우리가 사용하는 EC2, RDS 등이 이 격리된 공간 위에서 리소스를 생성하는 것입니다.\
하나의 계정에서 생성한 리소스들만의 `격리된 네트워크`를 만들어주는 기능이 바로 VPC이고, 격리되어 있기 때문에 다른 사람들은 접근하고 보는 것이 불가능해집니다.

2019년부터 모든 사용자에게 VPC적용이 강제적으로 부여됐기 때문에, 대부분의 서비스는 VPC없이는 사용할 수가 없습니다.

![](https://media.vlpt.us/images/may\_soouu/post/85314b79-7369-461c-bd0d-0725278fe355/aws.jpeg)

### VPC는 그럼 어떻게 생성되는가? <a href="#vpc" id="vpc"></a>

우리가 EC2를 생성할 때 설정하는 항목이 있습니다.\
![](https://media.vlpt.us/images/may\_soouu/post/8e305667-e41f-48c2-ab25-a5452e0d7f04/ec2.png)\
3번째 줄에 `네트워크`라고 있는데, 이 부분에서 VPC를 설정합니다.

이렇게 계정을 만들고 EC2를 생성하면 하나의 리전에서 만들어지는 기본 리소스는 7가지가 있습니다.

*
  1. VPC
*
  1. 서브넷
*
  1. 라우트 테이블
*
  1. 네트워크 ACL
*
  1. 시큐리티 그룹
*
  1. 인터넷 게이트웨이
*
  1. DHCP 옵션셋

#### 1. VPC <a href="#1-vpc" id="1-vpc"></a>

프라이빗 클라우드를 만드는 가장 기본이 되는 리소스입니다.\
이름과 IPv4 CIDR 블록으로 구성되어 있습니다.

* CIDP 블록\
  : IP의 범위를 지정하는 방식\
  : `IP주소` + `/` + `넷마스크` 로 구성되어 있음\
  `ex. 192.123.0.0/넷마스크 숫자`\
  \
  \- 넷마스크 숫자는 IP의 범위를 나타내며 계산 방법은 `2^(32-n)` 입니다.\
  `ex. 192.123.0.0/24 면 2^(32-24)=256, 즉 245개의 IP주소를 의미합니다. (192.123.0.0 ~ 192.123.1.255)`

VPC 범위 내에서 IP를 전부 할당하면 더 이상 리소스를 만들 수 없기 때문에 적절한 크기의 VPC를 만들어야 하고, 최대크기는 16입니다.(2^(32-16)=65536)

#### 2. 서브넷 <a href="#2" id="2"></a>

* 서브넷은 실제로 리소스가 생성되는 물리적인 공간(가용존)과 연결됩니다.
* 하나의 VPC에 N개의 서브넷을 가질 수 있습니다.
* 서브넷의 넷마스크 범위는 16(2^(32-16)=65536개) \~ 28(2^(32-28)=16개)입니다.
* 하나의 가용존에 하나의 서브넷이 연결되기 때문에, 특정 리전에서 사용 가능한 가용존의 갯수를 미리 확인해야 합니다.

#### 3. 라우트 테이블 <a href="#3" id="3"></a>

* 서브넷과 연결되어 있는 리소스입니다.
* VPC를 생성할 때 만들어지며, VPC에 속한 서브넷을 만들 때 기본 라우트 테이블로 사용됩니다.
* 하나의 라우트 테이블은 VPC에 속한 다수의 서브넷에서 사용할 수 있습니다.

#### 4. 인터넷 게이트웨이 <a href="#4" id="4"></a>

VPC는 격리된 네트워크 환경이기 때문에, 이 안에서 생성된 리소스들은 인터넷을 사용할 수가 없습니다.\
따라서 인터넷과 연결하기 위해서는 인터넷 게이트웨이가 필요합니다.\
서브넷 <-> 인터넷게이트웨이 연결 후에, 퍼블릭IP를 가지고 있어야합니다.

#### 5. DHCP 옵션셋 <a href="#5-dhcp" id="5-dhcp"></a>

TCP/IP 네트워크 상의 호스트로 설정 정보를 전달하는 DHCP 표준입니다.\
이 기능을 통해 도메인 네임 서버, 도메인 네임, NTP 서버 등의 정보를 설정할 수 있습니다.

#### 6. 네트워크 ACL <a href="#6-acl" id="6-acl"></a>

서브넷 앞단에서 트래픽을 제어하는 가상 방화벽입니다.

#### 7.시큐리티 그룹 <a href="#7" id="7"></a>

인스턴스의 앞단에서 트래픽을 제어하는 가상 방화벽입니다.

![](https://media.vlpt.us/images/may\_soouu/post/f90e807c-6b19-44a9-920a-56353ea03c7f/awss.png)

[위 내용은 해당 블로그를 요약하였습니다.](https://www.44bits.io/ko/post/understanding\_aws\_vpc)
